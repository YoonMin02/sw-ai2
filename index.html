<!DOCTYPE html>
<html>

<head>
  <!-- Basic -->
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <!-- Mobile Metas -->
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
  <!-- Site Metas -->
  <meta name="keywords" content="" />
  <meta name="description" content="" />
  <meta name="author" content="" />

  <title>TalkMyPet</title>

  <!-- bootstrap core css -->
  <link rel="stylesheet" type="text/css" href="css/bootstrap.css" />

  <!-- fonts style -->
  <link href="https://fonts.googleapis.com/css?family=Open+Sans|Poppins:400,700&display=swap" rel="stylesheet">
  <!-- Custom styles for this template -->
  <link href="css/style.css" rel="stylesheet" />
  <!-- responsive style -->
  <link href="css/responsive.css" rel="stylesheet" />
  <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
  
</head>

<body>
  <div class="hero_area ">
    <!-- header section strats -->
    <header class="header_section">
      <div class="container-fluid">
        <nav class="navbar navbar-expand-lg custom_nav-container">
          <a class="navbar-brand" href="index.html">
            <img src="images/raccoon_holding-Photoroom.png" alt="">
          </a>
          
        </nav>
      </div>
    </header>
    <!-- end header section -->
    <!-- slider section -->
    <section class="slider_section">
      <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
        <!--ol class="carousel-indicators">
          <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
          <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
          <li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
          <li data-target="#carouselExampleIndicators" data-slide-to="3"></li>
        </ol-->
        <div class="carousel-inner">
          <div class="carousel-item active">
            <div class="container-fluid">
              <div class="row">
                <div class="col-md-5 offset-md-1">
                  <div class="detail-box">
                    <div class="number">
                      <br>
                    </div>
                    <h1>
                      토크 마이 펫 <br>
                      <span>
                        특수동물 케어 프로젝트
                      </span>
                    </h1>
                    
                    <div class="btn-box">
                      <a href="#contact" class="btn-2">
                        Contact Us
                      </a>
                    </div>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="img-box">
                    <img src="images/playing_together-Photoroom.png" alt="">
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!--div class="carousel-item">
            <div class="container-fluid">
              <div class="row">
                <div class="col-md-5 offset-md-1">
                  <div class="detail-box">
                    <div class="number">
                      <h5>
                        02
                      </h5>
                    </div>
                    <h1>
                      Drool <br>
                      <span>
                        Pet And Animal
                      </span>
                    </h1>
                    <p>
                      Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt
                    </p>
                    <div class="btn-box">
                      <a href="" class="btn-1">
                        Read More
                      </a>
                      <a href="" class="btn-2">
                        Contact Us
                      </a>
                    </div>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="img-box">
                    <img src="images/raccoon_holding-Photoroom.png" alt="">
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="carousel-item">
            <div class="container-fluid">
              <div class="row">
                <div class="col-md-5 offset-md-1">
                  <div class="detail-box">
                    <div class="number">
                      <h5>
                        03
                      </h5>
                    </div>
                    <h1>
                      Drool <br>
                      <span>
                        Pet And Animal
                      </span>
                    </h1>
                    <p>
                      Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt
                    </p>
                    <div class="btn-box">
                      <a href="" class="btn-1">
                        Read More
                      </a>
                      <a href="" class="btn-2">
                        Contact Us
                      </a>
                    </div>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="img-box">
                    <img src="images/heghehog.png" alt="">
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="carousel-item">
            <div class="container-fluid">
              <div class="row">
                <div class="col-md-5 offset-md-1">
                  <div class="detail-box">
                    <div class="number">
                      <h5>
                        04
                      </h5>
                    </div>
                    <h1>
                      Drool <br>
                      <span>
                        Pet And Animal
                      </span>
                    </h1>
                    <p>
                      Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt
                    </p>
                    <div class="btn-box">
                      <a href="" class="btn-1">
                        Read More
                      </a>
                      <a href="" class="btn-2">
                        Contact Us
                      </a>
                    </div>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="img-box">
                    <img src="images/rabbit.png" alt="">
                  </div>
                </div>
              </div>
            </div>
          </div-->
        </div>
      </div>

    </section>
    <!-- end slider section -->
  </div>

  <!-- about section -->

  <section class="about_section layout_padding">
    <div class="container">
      <div class="detail-box">
        <div class="heading_container">
          
          <h2>
            이런 경험 없으신가요? <br><br>
          </h2>
        </div>
        <p>
          <div class="heading_container">
            <img src="images/heading-img.png" alt="">
          </div>
          저희 아이가 갑자기 숨을 가쁘게 쉬었는데 지금은 좀 괜찮아 졌어요. 검진을 받아야 할까요?  <br><br>
        </p>
        <p>
          <div class="heading_container">
            <img src="images/rabbit_icon.png" alt="">
          </div>
          강아지나 고양이는 먹어도 되는 거라는데, 저희 아이가 먹어도 되는 걸까요?  <br><br>
        </p>
        <p>
          <div class="heading_container">
            <img src="images/heghehog_icon.png" alt="">
          </div>
          병원에 데려가고 싶은데, 이곳에서 저희아이를 봐줄 수 있을까요?  <br><br>
        </p>
      </div>
    </div>
  </section>

  <!-- end about section -->

  <!-- animal section -->

  <!--section class="animal_section layout_padding">
    <div class="container">
      <div class="animal_container">
        <div class="box b1">
          <div class="img-box">
            <img src="images/dog.jpg" alt="">
          </div>
          <div class="detail-box">
            <h5>
              Cute Dog
            </h5>
            <p>
              It is a long established fact that a reader will be distracted by
            </p>
          </div>
        </div>
        <div class="box b2">
          <div class="img-box">
            <img src="images/bird.jpg" alt="">
          </div>
          <div class="detail-box">
            <h5>
              Birds
            </h5>
            <p>
              It is a long established fact that a reader will be distracted by
            </p>
          </div>
        </div>
        <div class="box b1">
          <div class="img-box">
            <img src="images/fish.jpg" alt="">
          </div>
          <div class="detail-box">
            <h5>
              Fish
            </h5>
            <p>
              It is a long established fact that a reader will be distracted by
            </p>
          </div>
        </div>
        <div class="box b2">
          <div class="img-box">
            <img src="images/cat.jpg" alt="">
          </div>
          <div class="detail-box">
            <h5>
              Cat Bite
            </h5>
            <p>
              It is a long established fact that a reader will be distracted by
            </p>
          </div>
        </div>
      </div>
    </div>
  </section-->

  <!-- end animal section -->

  <!-- pet section -->

  <section class="pet_section layout_padding">
    <div class="container">
      <div class="row">
        <div class="col-md-6">
          <div class="img-box">
            <img src="images/raccoon_holding-Photoroom.png" alt="">
          </div>
        </div>
        <div class="col-md-6">
          <div class="detail-box">
            <div class="heading_container">
              <img src="images/heading-img.png" alt="">
              <h2>
                특수동물을 기르신다면
              </h2>
            </div>
            <p>
              다른 동물들과 비슷하면서도 다른 우리아이의 특징. 내가 잘못한 건 아닌지 불안한 마음이 들 수 있습니다. <br>
              왜 이런 소리를 내는건지, 왜 내 행동에 이렇게 반응하는지, 어떤걸 먹어야하는지, 궁금하지만 정보가 너무 부족하다고 느껴지죠. <br>
              만약 집안에서 손쉽게 답을 얻을 수 있다면요? <br><br>
              저희는 특수동물에 대한 정보를 제공하고, 동물병원과 연결해 드리는 서비스를 준비하고 있습니다. <br>
              병원을 가야하는지 궁금하다면 수의사분의 의견을 온라인 상담으로 직접 들을 수 있게 될것입니다.. <br>
            </p>
            
          </div>
        </div>
      </div>
    </div>
  </section>


  <!-- end pet section -->

  <!-- us section -->

  <!--section class="us_section layout_padding-bottom">
    <div class="container">
      <div class="heading_container">
        <img src="images/heading-img.png" alt="">
        <h2>
          Why Choose Us
        </h2>
        <p>
          It is a long established fact that a reader will be distracted by the readable content of a
        </p>
      </div>
      <div class="us_container">
        <div class="box">
          <div class="img1-box">
            <img src="images/pet1.png" alt="">
          </div>
          <div class="img2-box">
            <img src="images/omega.png" alt="">
          </div>
          <div class="detail-box">
            <h6>
              PET NUTRITIONISTS
            </h6>
          </div>
        </div>
        <div class="box">
          <div class="img1-box">
            <img src="images/pet2.png" alt="">
          </div>
          <div class="img2-box">
            <img src="images/dog.png" alt="">
          </div>
          <div class="detail-box">
            <h6>
              STANDARDS
            </h6>
          </div>
        </div>
        <div class="box">
          <div class="img1-box">
            <img src="images/pet2.png" alt="">
          </div>
          <div class="img2-box">
            <img src="images/shield.png" alt="">
          </div>
          <div class="detail-box">
            <h6>
              QUALITY & SAFETY
            </h6>
          </div>
        </div>
      </div>
      <div class="btn-box">
        <a href="">
          <span>
            Read More
          </span>
          <img src="images/link-arrow.png" alt="">
        </a>
      </div>
    </div>
  </section-->

  <!-- end us section -->

  <!-- food section -->

  


  <!-- end food section -->

  <!-- client section -->

  <!--section class="client_section layout_padding">
    <div class="container">
      <div class="heading_container">
        <img src="images/heading-img.png" alt="">
        <h2>
          What Says Our Customer
        </h2>
        <p>
          It is a long established fact that a reader will be distracted by the
        </p>
      </div>
      <div id="carouselExampleControls" class="carousel slide" data-ride="carousel">
        <div class="carousel-inner">
          <div class="carousel-item active">
            <div class="box">
              <div class="img-box">
                <img src="images/client.png" alt="">
              </div>
              <div class="detail-box">
                <h4>
                  Jack Mengo
                </h4>
                <p>
                  It is a long established fact that a reader will be distracted by the readable cIt is a long established fact that a reader will be distracted by the readable c
                </p>
                <img src="images/quote.png" alt="">
              </div>
            </div>
          </div>
          <div class="carousel-item">
            <div class="box">
              <div class="img-box">
                <img src="images/client.png" alt="">
              </div>
              <div class="detail-box">
                <h4>
                  Jack Mengo
                </h4>
                <p>
                  It is a long established fact that a reader will be distracted by the readable cIt is a long established fact that a reader will be distracted by the readable c
                </p>
                <img src="images/quote.png" alt="">
              </div>
            </div>
          </div>
          <div class="carousel-item">
            <div class="box">
              <div class="img-box">
                <img src="images/client.png" alt="">
              </div>
              <div class="detail-box">
                <h4>
                  Jack Mengo
                </h4>
                <p>
                  It is a long established fact that a reader will be distracted by the readable cIt is a long established fact that a reader will be distracted by the readable c
                </p>
                <img src="images/quote.png" alt="">
              </div>
            </div>
          </div>
        </div>
        <div class="carousel_btn-box">
          <a class="carousel-control-prev" href="#carouselExampleControls" role="button" data-slide="prev">
            <span class="sr-only">Previous</span>
          </a>
          <a class="carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next">
            <span class="sr-only">Next</span>
          </a>
        </div>
      </div>
    </div>
  </section-->

  <!-- end client section -->

  <!-- contact section -->

  <section class="contact_section layout_padding-top" id="contact">
    <div class="container-fluid">
      <div class="row">
        <div class="col-md-5 offset-md-1">
          <div class="form_container">
            <div class="heading_container">
              <img src="images/heading-img.png" alt="">

              <h2>
                이메일을 남겨주시면 서비스가 런칭되었을 때 알림을 드리겠습니다. 
              </h2>
              <p>
                서비스가 이렇게 되었으면 좋겠다는 조언을 해 주세요
              </p>
            </div>
            <form action="">
              
              <div>
                <input id="submit-email" type="email" placeholder="Email" />
              </div>
              <div>
                <input id="submit-advice" type="Text" class="message-box" placeholder="Message" />
              </div>
              <div class="d-flex ">
                <button id="submit">
                  SEND
                </button>
              </div>
            </form>
          </div>
        </div>
        <div class="col-md-6 px-0">
          <div>
              <img src="images/end-img2.png" style="float: right;" alt="">
          </div>
        </div>
      </div>
    </div>
  </section>
  <section class="chatbot_section layout_padding">
    <div class="container">
      <div class="heading_container">
        <img src="images/heading-img.png" alt="">
        <h2>AI 챗봇에게 질문하기</h2>
        <p>특수동물에 대해 궁금한 점을 AI에게 물어보세요!</p>
      </div>
      <div class="row">
        <div class="col-md-8 offset-md-2">
          <div id="chat-window">
            </div>
          <div class="input-group">
            <input type="text" id="chat-input" class="form-control" placeholder="메시지를 입력하세요...">
            <div class="input-group-append">
              <button id="send-btn" class="btn btn-primary">전송</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- end contact section -->


  <!-- info section >
  <section class="info_section ">
    <div class="container">
      <div class="row">
        <div class="col-md-6 col-lg-3">
          <div class="info_contact">
            <h5>
              CONTACT INFO
            </h5>
            <div>
              <img src="images/call.png" alt="" />
              <p>
                +01 1234567890
              </p>
            </div>
            <div>
              <img src="images/mail.png" alt="" />
              <p>
                demo@gmail.com
              </p>
            </div>
          </div>
        </div>
        <div class="col-md-6 col-lg-3">
          <div class="info_time">
            <h5>
              Opening Hours Shop
            </h5>
            <div>
              <p>
                Monday to friday
              </p>
            </div>
            <div>
              <p>
                07:00 am to 04:00 pm
              </p>
            </div>
          </div>
        </div>

        <div class="col-md-6 col-lg-3">
          <div class="info_social">
            <h5>
              social media
            </h5>
            <div class="social_container">
              <div>
                <a href="">
                  <img src="images/fb.png" alt="" />
                </a>
              </div>
              <div>
                <a href="">
                  <img src="images/twitter.png" alt="" />
                </a>
              </div>
              <div>
                <a href="">
                  <img src="images/linkedin.png" alt="" />
                </a>
              </div>
              <div>
                <a href="">
                  <img src="images/instagram.png" alt="" />
                </a>
              </div>
            </div>
          </div>
        </div>
        <div class="col-md-6 col-lg-3">
          <div class="info_form pl-lg-4">
            <h5>
              Newsletter
            </h5>
            <form action="">
              <input type="text" placeholder="Enter Your Email" />
              <button type="submit">
                Subscribe
              </button>
            </form>
          </div>
        </div>
      </div>
    </div>
  </section-->

  <!-- end info_section -->


  <!-- footer section -->
  <section class="container-fluid footer_section ">
    <p>
      &copy; 2019 All Rights Reserved. Design by
      <a href="https://html.design/">Free Html Templates</a>
    </p>
  </section>
  <!-- end  footer section -->


  <script type="text/javascript" src="js/jquery-3.4.1.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/busy-load/dist/app.min.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/busy-load/dist/app.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/gh/dinoqqq/simple-popup@master/dist/jquery.simple-popup.min.js"></script>
  <link href="https://cdn.jsdelivr.net/gh/dinoqqq/simple-popup@master/dist/jquery.simple-popup.min.css" rel="stylesheet" type="text/css" />
  <script type="text/javascript" src="js/bootstrap.js"></script>
  <script>
    function openNav() {
      document.getElementById("myNav").classList.toggle("menu_width")
      document.querySelector(".custom_menu-btn").classList.toggle("menu_btn-style")
    }
  </script>
  <script>
    // 쿠키에서 값을 가져오는 함수
   function getCookieValue(name) {
     const value = "; " + document.cookie;
     const parts = value.split("; " + name + "=");
     if (parts.length === 2) {
       return parts.pop().split(";").shift();
     }
   }

   // 쿠키에 값을 저장하는 함수
   function setCookieValue(name, value, days) {
     let expires = "";
     if (days) {
       const date = new Date();
       date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
       expires = "; expires=" + date.toUTCString();
     }
     document.cookie = name + "=" + (value || "") + expires + "; path=/";
   }

   function getUVfromCookie() {
     // 6자리 임의의 문자열 생성
     const hash = Math.random().toString(36).substring(2, 8).toUpperCase();
     // 쿠키에서 기존 해시 값을 가져옴
     const existingHash = getCookieValue("user");
     // 기존 해시 값이 없으면, 새로운 해시 값을 쿠키에 저장
     if (!existingHash) {
       setCookieValue("user", hash, 180); // 쿠키 만료일은 6개월 
       return hash;
     } else {
       // 기존 해시 값이 있으면, 기존 값을 반환
       return existingHash;
     }
   }

   /* 수정 payload data -> id:getUVfromCookie() */
  </script>

<script>
  // Sam pading value to start with 0. eg: 01, 02, .. 09, 10, ..
 function padValue(value) {
   return (value < 10) ? "0" + value : value;
 }

 function getTimeStamp() {
   const date = new Date();

   const year = date.getFullYear();
   const month = date.getMonth() + 1;
   const day = date.getDate();
   const hours = date.getHours();
   const minutes = date.getMinutes();
   const seconds = date.getSeconds();

   const formattedDate = `${padValue(year)}-${padValue(month)}-${padValue(day)} ${padValue(hours)}:${padValue(minutes)}:${padValue(seconds)}`;

   return formattedDate;
 }
</script>

<script type="application/javascript">
  var ip = "null";
  function getIP(json) {
      console.log(json);
      try {
        ip = json.ip;
      } catch (e) {
        ip = 'unknown';
      }
      return;
  }
  </script>
  <script type="application/javascript" src="https://jsonip.com?format=jsonp&callback=getIP"></script>

<script>
  /* data를 만들 땐 모든 field가 들어 있어야 함 */
  var queryString = location.search;
  const urlParams = new URLSearchParams(queryString);
const utm = urlParams.get("utm")


  var mobile = 'desktop';
  if (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {
     // true for mobile device
     mobile = 'mobile';
  }


  

  var data = JSON.stringify(
                    {"id": getUVfromCookie(),
                    "landingUrl" : window.location.href, 
                    "ip":ip, 
                    "referer":document.referrer,
                    "time_stamp":getTimeStamp(), 
                    "utm":utm,
                    "device":mobile}
                    );

  

  $(document).ready(function () {

     addrScript = 'https://script.google.com/macros/s/AKfycbz5dVHAxhWtFwflYQ1X78_XHOp6MV7daf8fRdY007RjMDqX9SykIUYWhr2VxpbQksr5OA/exec';


     $.ajax({
           url: addrScript+'?action=insert&table=visitors&data='+data,
           dataType: 'jsonp',
           success: function (data) {
              console.log('성공 - ', JSON.stringify(data));
           },
           error: function (xhr) {
              console.log('실패 - ', JSON.stringify(xhr));
           }
     });

     axios.get(addrScript+'?action=insert&table=visitors&data='+data)
     .then(response => {
       console.log(JSON.stringify(response));
     })
     .catch(error => {
       if (error.response) {
         // 서버가 2xx 범위를 벗어난 상태 코드로 응답한 경우
         console.log(error.response.data);
         console.log(error.response.status);
         console.log(error.response.headers);
       } else if (error.request) {
         // 요청이 전송되었지만 응답을 받지 못한 경우
         console.log(error.request);
       } else {
         // 요청 설정 중에 오류가 발생한 경우
         console.log('Error', error.message);
       }
       console.log(error.config);
     });
     $("#submit").on("click", function () {
        $.busyLoadFull("show");
        
        const email = $("#submit-email").val();
        const advice = $("#submit-advice").val();
    
        function validateEmail(email) {
              var re = /^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i;
              return re.test(email);
        }
    
        if (email == '' || !validateEmail(email)) {
              alert("이메일이 유효하지 않아 알림을 드릴 수가 없습니다. ");
              $.busyLoadFull("hide");
              return;
        }
    
        var finalData = JSON.stringify({
              "id": getUVfromCookie(),
              "email": email,
              "advice": advice
        })
        
    
        axios.get(addrScript+'?action=insert&table=tab_final&data=' + finalData)
                .then(response => {
              console.log(response.data.data);
              $.busyLoadFull("hide");
              alert(JSON.stringify(response));
              
              $.fn.simplePopup({ type: "html", htmlSelector: "#popup" });
              $('#submit-email').val('');
              $('#submit-advice').val('');
              
        })
        
    });
    })
     </script>
     <script>
        $(document).ready(function() {
          // ★★★ API_KEY 상수가 완전히 제거되었습니다! ★★★
          
          const modelSelector = $('#model-selector'); 
          const chatWindow = $('#chat-window');
          const chatInput = $('#chat-input');
          const sendBtn = $('#send-btn');
      
          function displayMessage(message, sender) {
            const messageRow = $('<div></div>').addClass('message-row');
            const messageBubble = $('<div></div>').addClass('message-bubble').text(message);
            if (sender === 'user') {
              messageRow.addClass('user-row');
              messageBubble.addClass('user-bubble');
            } else {
              messageRow.addClass('bot-row');
              messageBubble.addClass('bot-bubble');
            }
            messageRow.append(messageBubble);
            chatWindow.append(messageRow);
            chatWindow.scrollTop(chatWindow[0].scrollHeight);
          }
      
          // AI에게 메시지를 보내고 응답을 받는 함수 (호출 주소 변경)
          async function getAIResponse(prompt) {
            const selectedModel = modelSelector.val() || 'gemini-2.0-flash';
            
            // ▼▼▼ 핵심 수정 부분: .get이 아닌 .post를 사용하고, 데이터를 body에 담아 보냅니다. ▼▼▼
            try {
              const response = await axios.post('/api/chat', {
                prompt: "너는 특수동물 전문가야. 사용자의 질문에 친절하고 상세하게 답변해줘. 질문: " + prompt,
                model: selectedModel
              });
              // ▲▲▲ 핵심 수정 부분 끝 ▲▲▲

              return response.data.candidates[0].content.parts[0].text;
            } catch (error) {
              console.error('API Error:', error); // <-- 현재 스크린샷에 보이는 에러가 여기서 출력됩니다.
              return '죄송합니다. 서버와 통신 중 오류가 발생했습니다.';
            }
          }
      
          async function sendMessage() {
            const userInput = chatInput.val().trim();
            if (userInput === '') return;
            displayMessage(userInput, 'user');
            chatInput.val('');
            displayMessage('AI가 답변을 생각하고 있어요...', 'bot');
            const aiResponse = await getAIResponse(userInput);
            chatWindow.find('.bot-row:last-child').remove();
            displayMessage(aiResponse, 'bot');
          }
      
          sendBtn.on('click', sendMessage);
          chatInput.on('keypress', function(e) {
            if (e.which === 13) { sendMessage(); }
          });
          displayMessage('안녕하세요! TalkMyPet AI 챗봇입니다. 특수동물에 대해 무엇이든 물어보세요.', 'bot');
        });
      </script>
     
     
</body>

</html>
